<!-- molla/login.html  22 Nov 2019 10:04:03 GMT -->

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />
  <title>Cycle Store</title>
  <meta name="keywords" content="HTML5 Template" />
  <meta name="description" content="Molla - Bootstrap eCommerce Template" />
  <meta name="author" content="p-themes" />
  <!-- Favicon -->
  <link
    rel="apple-touch-icon"
    sizes="180x180"
    href="assets/images/icons/apple-touch-icon.png"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="32x32"
    href="/assets/images/logo.png"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="16x16"
    href="/assets/images/logo.png"
  />
  <link rel="manifest" href="assets/images/icons/site.html" />
  <link
    rel="mask-icon"
    href="/assets/images/logo.png"
    color="#666666"
  />
  <link rel="shortcut icon" href="/assets/images/logo.png" />
  <meta name="apple-mobile-web-app-title" content="Molla" />
  <meta name="application-name" content="Molla" />
  <meta name="msapplication-TileColor" content="#cc9966" />
  <meta
    name="msapplication-config"
    content="assets/images/icons/browserconfig.xml"
  />
  <meta name="theme-color" content="#ffffff" />
  <!-- Plugins CSS File -->
  <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
  <!-- Main CSS File -->
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body>
  <div class="page-wrapper">
    <header class="header">
      <div class="header-top">
        <div class="container">
          <div class="header-right">
            <ul class="top-menu">
              <li>
                <a href="#">Links</a>
                <ul>
                  <li><a href="about.html">About Us</a></li>
                </ul>
              </li>
            </ul>
            <!-- End .top-menu -->
          </div>
          <!-- End .header-right -->
        </div>
        <!-- End .container -->
      </div>
      <!-- End .header-top -->

      <div class="header-middle sticky-header">
        <div class="container">
          <div class="header-left">
            <button class="mobile-menu-toggler">
              <span class="sr-only">Toggle mobile menu</span>
              <i class="icon-bars"></i>
            </button>

            <a href="index.html" class="logo">
              <img
                src="assets/images/logo.png"
                alt="Cycle Logo"
                width="70"
                height="25"
              />
            </a>
          </div>
          <!-- End .header-left -->
        </div>
        <!-- End .container -->
      </div>
      <!-- End .header-middle -->
    </header>
    <!-- End .header -->

    <main class="main">
      <div
        class="login-page bg-image pt-8 pb-8 pt-md-12 pb-md-12 pt-lg-17 pb-lg-17"
        style="background-image: url('assets/images/backgrounds/login-bg.jpg')"
      >
        <div class="container">
          <div class="form-box">
            <div class="form-tab">
              <ul class="nav nav-pills nav-fill" role="tablist">
                <li class="nav-item">
                  <a
                    class="nav-link"
                    id="signin-tab-2"
                    data-toggle="tab"
                    href="#signin-2"
                    role="tab"
                    aria-controls="signin-2"
                    aria-selected="false"
                    >Sign In</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link active"
                    id="register-tab-2"
                    data-toggle="tab"
                    href="#register-2"
                    role="tab"
                    aria-controls="register-2"
                    aria-selected="true"
                    >Register</a
                  >
                </li>
              </ul>
              <div class="tab-content">
                <div
                  class="tab-pane fade"
                  id="signin-2"
                  role="tabpanel"
                  aria-labelledby="signin-tab-2"
                >
                  
                
                
                
                
                
                
                
                
                
                
                <form id="loginValidation">
                    <div class="form-group">
                      <% if (invalidLoginDetails) { %>
                        <p class="error">Invalid email or password</p>
                      <% } %>
                      <label for="singin-email-2">Email address *</label>
                      <input
                        type="text"
                        class="form-control"
                        id="loginEmail"
                        name="email"
                        required
                      /><br />
                      <label for="singin-email-2">Password *</label>
                      <input
                        type="password"
                        class="form-control"
                        id="loginPassword"
                        name="password"
                        required
                      />
                    </div>
                    <!-- End .form-group -->

                    <!-- <div class="form-group">
							    			<label for="singin-password-2">Password *</label>
							    			<input type="password" class="form-control" id="singin-password-2" name="singin-password" required>
							    		</div>End .form-group -->

                      <div class="form-footer">
                      <button type="submit" class="btn btn-outline-primary-2">
                        <span>LOG IN</span>
                        <i class="icon-long-arrow-right"></i>
                      </button>

                      <div class="custom-control custom-checkbox">
                        <input
                          type="checkbox"
                          class="custom-control-input"
                          id="signin-remember-2"
                        />
                        <label
                          class="custom-control-label"
                          for="signin-remember-2"
                          >Remember Me</label
                        >
                      </div>
                      <!-- End .custom-checkbox -->

                      <a href="/forgotPassword" class="forgot-link">Forgot Your Password?</a>
                    </div>
                    <!-- End .form-footer -->
                  </form>











                  
                  <div class="form-choice">
                    <p class="text-center">or sign in with</p>
                    <div class="row">
                      <div class="col-sm-6">
                        <a href="#" class="btn btn-login btn-g">
                          <i class="icon-google"></i>
                          Login With Google
                        </a>
                      </div>
                      <!-- End .col-6 -->
                      <div class="col-sm-6">
                        <a href="#" class="btn btn-login btn-f">
                          <i class="icon-facebook-f"></i>
                          Login With Facebook
                        </a>
                      </div>
                      <!-- End .col-6 -->
                    </div>
                    <!-- End .row -->
                  </div>
                  <!-- End .form-choice -->
                </div>
                <!-- .End .tab-pane -->
                <div
                  class="tab-pane fade show active"
                  id="register-2"
                  role="tabpanel"
                  aria-labelledby="register-tab-2"
                >
                  <form id="signupValidation" method="post">
                    <div class="form-group">
                      <label for="register-username">Username *</label>
                      <input
                        type="text"
                        class="form-control"
                        id="register-username"
                        name="userName"
                        required
                      />
                    </div>
                    <!-- End .form-group -->
                    <div class="form-group">
                      <label for="register-number">Phone Number *</label>
                      <input
                        type="number"
                        class="form-control"
                        id="register-number"
                        name="phoneNumber"
                        required
                      />
                    </div>
                    <!-- End .form-group -->
                    <div class="form-group">
                      <label for="register-email">Email address *</label>
                      <input
                        type="email"
                        class="form-control"
                        id="register-email"
                        name="email"
                        required
                      />
                    </div>
                    <!-- End .form-group -->

                    <div class="form-group">
                      <label for="register-password">Password *</label>
                      <input
                        type="password"
                        class="form-control"
                        id="register-password"
                        name="password"
                        required
                      />
                    </div>
                    <!-- End .form-group -->
                    <div class="form-group">
                      <label for="register-conform-password"
                        >Conform Password *</label
                      >
                      <input
                        type="password"
                        class="form-control"
                        id="register-conform-password"
                        name="conformPassword"
                        required
                      />
                    </div>
                    <!-- End .form-group -->

                    <div class="form-footer">
                      <input
                        type="submit"
                        class="btn btn-outline-primary-2"
                        value="Sign UP"
                      />
                      <span>SIGN UP</span>
                      <i class="icon-long-arrow-right"></i>

                      <div class="custom-control custom-checkbox">
                        <input
                          type="checkbox"
                          class="custom-control-input"
                          id="register-policy-2"
                        />
                        <label
                          class="custom-control-label"
                          for="register-policy-2"
                          >I agree to the
                          <a href="#">privacy policy</a> *</label
                        >
                      </div>
                      <!-- End .custom-checkbox -->
                    </div>
                    <!-- End .form-footer -->
                  </form>
                  <div class="form-choice">
                    <p class="text-center">or sign in with</p>
                    <div class="row">
                      <div class="col-sm-6">
                        <a href="#" class="btn btn-login btn-g">
                          <i class="icon-google"></i>
                          Login With Google
                        </a>
                      </div>
                      <!-- End .col-6 -->
                      <div class="col-sm-6">
                        <a href="#" class="btn btn-login btn-f">
                          <i class="icon-facebook-f"></i>
                          Login With Facebook
                        </a>
                      </div>
                      <!-- End .col-6 -->
                    </div>
                    <!-- End .row -->
                  </div>
                  <!-- End .form-choice -->
                </div>
                <!-- .End .tab-pane -->
              </div>
              <!-- End .tab-content -->
            </div>
            <!-- End .form-tab -->
          </div>
          <!-- End .form-box -->
        </div>
        <!-- End .container -->
      </div>
      <!-- End .login-page section-bg -->
    </main>
    <!-- End .main -->

    <footer class="footer">
      <div class="footer-middle">
        <div class="container">
          <div class="row">
            <div class="col-sm-6 col-lg-3">
              <div class="widget widget-about">
                <img
                  src="assets/images/logo.png"
                  class="footer-logo"
                  alt="Footer Logo"
                  width="70"
                  height="25"
                />
                <p>
                  Praesent dapibus, neque id cursus ucibus, tortor neque egestas
                  augue, eu vulputate magna eros eu erat.
                </p>

                <div class="social-icons">
                  <a
                    href="#"
                    class="social-icon"
                    target="_blank"
                    title="Facebook"
                    ><i class="icon-facebook-f"></i
                  ></a>
                  <a
                    href="#"
                    class="social-icon"
                    target="_blank"
                    title="Twitter"
                    ><i class="icon-twitter"></i
                  ></a>
                  <a
                    href="#"
                    class="social-icon"
                    target="_blank"
                    title="Instagram"
                    ><i class="icon-instagram"></i
                  ></a>
                  <a
                    href="#"
                    class="social-icon"
                    target="_blank"
                    title="Youtube"
                    ><i class="icon-youtube"></i
                  ></a>
                  <a
                    href="#"
                    class="social-icon"
                    target="_blank"
                    title="Pinterest"
                    ><i class="icon-pinterest"></i
                  ></a>
                </div>
                <!-- End .soial-icons -->
              </div>
              <!-- End .widget about-widget -->
            </div>
            <!-- End .col-sm-6 col-lg-3 -->

            <div class="col-sm-6 col-lg-3">
              <div class="widget">
                <h4 class="widget-title">Useful Links</h4>
                <!-- End .widget-title -->

                <ul class="widget-list">
                  <li><a href="about.html">About Molla</a></li>
                  <li><a href="#">How to shop on Molla</a></li>
                  <li><a href="#">FAQ</a></li>
                  <li><a href="contact.html">Contact us</a></li>
                  <li><a href="login.html">Log in</a></li>
                </ul>
                <!-- End .widget-list -->
              </div>
              <!-- End .widget -->
            </div>
            <!-- End .col-sm-6 col-lg-3 -->

            <div class="col-sm-6 col-lg-3">
              <div class="widget">
                <h4 class="widget-title">Customer Service</h4>
                <!-- End .widget-title -->

                <ul class="widget-list">
                  <li><a href="#">Payment Methods</a></li>
                  <li><a href="#">Money-back guarantee!</a></li>
                  <li><a href="#">Returns</a></li>
                  <li><a href="#">Shipping</a></li>
                  <li><a href="#">Terms and conditions</a></li>
                  <li><a href="#">Privacy Policy</a></li>
                </ul>
                <!-- End .widget-list -->
              </div>
              <!-- End .widget -->
            </div>
            <!-- End .col-sm-6 col-lg-3 -->

            <div class="col-sm-6 col-lg-3">
              <div class="widget">
                <h4 class="widget-title">My Account</h4>
                <!-- End .widget-title -->

                <ul class="widget-list">
                  <li><a href="#">Sign In</a></li>
                  <li><a href="cart.html">View Cart</a></li>
                  <li><a href="#">My Wishlist</a></li>
                  <li><a href="#">Track My Order</a></li>
                  <li><a href="#">Help</a></li>
                </ul>
                <!-- End .widget-list -->
              </div>
              <!-- End .widget -->
            </div>
            <!-- End .col-sm-6 col-lg-3 -->
          </div>
          <!-- End .row -->
        </div>
        <!-- End .container -->
      </div>
      <!-- End .footer-middle -->

      <div class="footer-bottom">
        <div class="container">
          <p class="footer-copyright">
            Copyright © 2019 Molla Store. All Rights Reserved.
          </p>
          <!-- End .footer-copyright -->
          <figure class="footer-payments">
            <img
              src="assets/images/payments.png"
              alt="Payment methods"
              width="272"
              height="20"
            />
          </figure>
          <!-- End .footer-payments -->
        </div>
        <!-- End .container -->
      </div>
      <!-- End .footer-bottom -->
    </footer>
    <!-- End .footer -->
  </div>
  <!-- End .page-wrapper -->
  <button id="scroll-top" title="Back to Top">
    <i class="icon-arrow-up"></i>
  </button>

  <!-- Mobile Menu -->
  <div class="mobile-menu-overlay"></div>
  <!-- End .mobil-menu-overlay -->

  <div class="mobile-menu-container">
    <div class="social-icons">
      <a href="#" class="social-icon" target="_blank" title="Facebook"
        ><i class="icon-facebook-f"></i
      ></a>
      <a href="#" class="social-icon" target="_blank" title="Twitter"
        ><i class="icon-twitter"></i
      ></a>
      <a href="#" class="social-icon" target="_blank" title="Instagram"
        ><i class="icon-instagram"></i
      ></a>
      <a href="#" class="social-icon" target="_blank" title="Youtube"
        ><i class="icon-youtube"></i
      ></a>
    </div>
    <!-- End .social-icons -->
  </div>
  <!-- End .mobile-menu-wrapper -->
  <!-- </div>End .mobile-menu-container -->

  <!-- Sign in / Register Modal -->
  <div
    class="modal fade"
    id="signin-modal"
    tabindex="-1"
    role="dialog"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-body">
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true"><i class="icon-close"></i></span>
          </button>

          <div class="form-box">
            <div class="form-tab">
              <ul class="nav nav-pills nav-fill" role="tablist">
                <li class="nav-item">
                  <a
                    class="nav-link active"
                    id="signin-tab"
                    data-toggle="tab"
                    href="#signin"
                    role="tab"
                    aria-controls="signin"
                    aria-selected="true"
                    >Sign In</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    id="register-tab"
                    data-toggle="tab"
                    href="#register"
                    role="tab"
                    aria-controls="register"
                    aria-selected="false"
                    >Register</a
                  >
                </li>
              </ul>
              <div class="tab-content" id="tab-content-5">
                <div
                  class="tab-pane fade show active"
                  id="signin"
                  role="tabpanel"
                  aria-labelledby="signin-tab"
                >
                  <form action="/">
                    <!-- <div class="form-group">
							    			<label for="singin-password-2">Username *</label>
							    			<input type="password" class="form-control" id="singin-password-2" name="userName" required>
							    		</div> -->
                    <!-- <div class="form-group">
							    			<label for="singin-password-2">Phone Number *</label>
							    			<input type="number" class="form-control" id="singin-password-2" name="phoneNumber" required>
							    		</div> -->
                    <div class="form-group">
                      <label for="singin-email">Email address *</label>
                      <input
                        type="email"
                        class="form-control"
                        id="singin-email"
                        name="email"
                        required
                      />
                    </div>
                    <!-- End .form-group -->

                    <div class="form-group">
                      <label for="singin-password">Password *</label>
                      <input
                        type="text"
                        class="form-control"
                        id="singin-password"
                        name="password"
                        required
                      />
                    </div>
                    <!-- End .form-group -->

                    <div class="form-group">
                      <label for="singin-password-2">Confirm password *</label>
                      <input
                        type="text"
                        class="form-control"
                        id="singin-password-2"
                        name="conformPassword"
                        required
                      />
                    </div>

                    <div class="form-footer">
                      <button class="btn btn-outline-primary-2">
                        <span>LOG IN</span>
                        <i class="icon-long-arrow-right"></i>
                      </button>

                      <div class="custom-control custom-checkbox">
                        <input
                          type="checkbox"
                          class="custom-control-input"
                          id="signin-remember"
                        />
                        <label
                          class="custom-control-label"
                          for="signin-remember"
                          >Remember Me</label
                        >
                      </div>
                      <!-- End .custom-checkbox -->

                      <a href="#" class="forgot-link">Forgot ?</a>
                    </div>
                    <!-- End .form-footer -->
                  </form>
                  <div class="form-choice">
                    <p class="text-center">or sign in with</p>
                    <div class="row">
                      <div class="col-sm-6">
                        <a href="#" class="btn btn-login btn-g">
                          <i class="icon-google"></i>
                          Login With Google
                        </a>
                      </div>
                      <!-- End .col-6 -->
                      <div class="col-sm-6">
                        <a href="#" class="btn btn-login btn-f">
                          <i class="icon-facebook-f"></i>
                          Login With Facebook
                        </a>
                      </div>
                      <!-- End .col-6 -->
                    </div>
                    <!-- End .row -->
                  </div>
                  <!-- End .form-choice -->
                </div>
                <!-- .End .tab-pane -->

                <div class="form-choice">
                  <p class="text-center">or sign in with</p>
                  <div class="row">
                    <div class="col-sm-6">
                      <a href="#" class="btn btn-login btn-g">
                        <i class="icon-google"></i>
                        Login With Google
                      </a>
                    </div>
                    <!-- End .col-6 -->
                    <div class="col-sm-6">
                      <a href="#" class="btn btn-login btn-f">
                        <i class="icon-facebook-f"></i>
                        Login With Facebook
                      </a>
                    </div>
                    <!-- End .col-6 -->
                  </div>
                  <!-- End .row -->
                </div>
                <!-- End .form-choice -->
              </div>
              <!-- .End .tab-pane -->
            </div>
            <!-- End .tab-content -->
          </div>
          <!-- End .form-tab -->
        </div>
        <!-- End .form-box -->
      </div>
      <!-- End .modal-body -->
    </div>
    <!-- End .modal-content -->
  </div>
  <!-- End .modal-dialog -->
  <!-- </div>End .modal -->

  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.js"
    integrity="sha512-+k1pnlgt4F1H8L7t3z95o3/KO+o78INEcXTbnoJQ/F2VqDVhWoaiVml/OEHv9HsVgxUaVW+IbiZPUJQfF/YxZw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <!-- Plugins JS File -->
  <!-- <script src="assets/js/jquery.min.js"></script> -->
  <script src="assets/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/jquery.hoverIntent.min.js"></script>
  <script src="assets/js/jquery.waypoints.min.js"></script>
  <script src="assets/js/superfish.min.js"></script>
  <script src="assets/js/owl.carousel.min.js"></script>
  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- <script src="assets/js/main.js"></script> -->

  <!-- <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script> -->
  <!-- <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script> -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.20.0/jquery.validate.min.js"
    integrity="sha512-WMEKGZ7L5LWgaPeJtw9MBM4i5w5OSBlSjTjCtSnvFJGSVD26gE5+Td12qN5pvWXhuWaWcVwF++F7aqu9cvqP0A=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.20.0/additional-methods.min.js"
    integrity="sha512-TiQST7x/0aMjgVTcep29gi+q5Lk5gVTUPE9XgN0g96rwtjEjLpod4mlBRKWHeBcvGBAEvJBmfDqh2hfMMmg+5A=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script>
    $("#signupValidation").validate({
      rules: {
        userName: {
          required: true,
          minlength: 2,
          pattern:/^[a-zA-Z]+$/
        },
        phoneNumber: {
          required: true,
          minlength: 10,
          maxlength: 10,
        },
        email: {
          required: true,
          email: true,
          pattern:/^[a-zA-Z0-9]/
        },
        password: {
          required: true,
          minlength: 6,
          pattern:/^[a-zA-Z0-9]/
        },
        conformPassword: {
          required: true,
          minlength: 6,
          equalTo: "#register-password",
        },
      },
      submitHandler: async function (signupValidation, e) {
        e.preventDefault();

        let data = {
          userName: signupValidation.userName.value,
          phoneNumber: signupValidation.phoneNumber.value,
          email: signupValidation.email.value,
          password: signupValidation.password.value,
          conformPassword: signupValidation.conformPassword.value,
        };

        try {
          const value = await fetch("/signupData", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          });
          const OTPData = await value.json();

          if (OTPData.success) {
            console.log("success");
            window.location.href = "/otp";
          } else {
            console.log("failed : get signup page");
            window.location.href = "/signup";
          }
        } catch (error) {
          console.log("error while fetching" + error);
        }
      },
    });

    $("#loginValidation").validate({
      rules: {
        email: {
          required: true,
          email: true,
          pattern:/^[a-zA-Z0-9]/
        },
        password: {
          required: true,
          minlength: 6,
          pattern:/^[a-zA-Z0-9]/
        },
      },
      submitHandler: async function (loginValidation, e) {
        e.preventDefault();
        try {
          let userData={}
           userData.email = document.getElementById("loginEmail").value;
           userData.password = document.getElementById("loginPassword").value;
          let data=await fetch("/login",{
            method:"POST",
            headers:{
              "Content-Type":"application/json"
            },
            body:JSON.stringify(userData)
          })

          const jsonData=await data.json();

          if(jsonData.success){
            window.location.href="/"
          }else{
            console.log('login fail')
            window.location.href="/signup"
          }

        } catch (error) {
          console.log(`error on the login page \n ${error}`)
        }
      },
    });
  </script>
</body>
